<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {margin: 0; padding: 0;}
       html, body {margin: 0; padding: 0; height: 100%; font-size: 10px; background: wheat;}
       body.hidden {overflow: hidden;}
       ul {list-style: none;}
       li {margin: 0; padding: 0;}
       div, h1, h2, h3, strong, em, p, span, button, a {font-size: 1.6rem;}
       .flex {display: flex;}
       .wrap {background-color: bisque;}
       .tab-header h1 {padding: 20px; box-sizing: border-box; font-size: 2rem; color: #000; background: lightblue;}
       .tab-button {display: flex; position: sticky; top: 20px; background:pink;}
       .tab-button > button {flex: 1; background: none;}
       .tab-button > button.on {background: orangered;}
       .tab-section > section {padding: 100px 0; min-height: 500px; border: 1px solid #000;}
       .space {padding: 100px 20px; background:paleturquoise;}
   </style>
</head>
<body>
    <div class="wrap">

        <div class="tab-header">
            <h1>Header</h1>
        </div>
        <div class="space">space~</div>
        <div class="tab-button > button">
            <button>01</button>
            <button>02</button>
            <button>03</button>
            <button>04</button>
        </div>

        <div class="tab-section">
            <section>
                section_01
            </section>
            <section>
                section_02
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
                <p>seciton - 02</p>
            </section>
            <section>
                section_03
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
                <p>seciton - 03</p>
            </section>
            <section>
                <p>seciton - 04</p>
                <p>seciton - 04</p>
                <p>seciton - 04</p>
                <p>seciton - 04</p>
                <p>seciton - 04</p>
                <p>seciton - 04</p>
                <p>seciton - 04</p>
                <p>seciton - 04</p>
                <p>seciton - 04</p>
                <p>seciton - 04</p>
                <p>seciton - 04</p>
                <p>seciton - 04</p>
                <p>seciton - 04</p>
                <p>seciton - 04</p>
                <p>seciton - 04</p>
                <p>seciton - 04</p>
                <p>seciton - 04</p>
                <p>seciton - 04</p>
                <p>seciton - 04</p>
                <p>seciton - 04</p>
                <p>seciton - 04</p>
                <p>seciton - 04</p>
                <p>seciton - 04</p>
                <p>seciton - 04</p>
                <p>seciton - 04</p>
                <p>seciton - 04</p>
                <p>seciton - 04</p>
                <p>seciton - 04</p>
                <p>seciton - 04</p>
                <p>seciton - 04</p>
                <p>seciton - 04</p>
            </section>
        </div>
    </div>


    <script type="text/javascript">
        (() => {

            let yOffset;
            const tabs = document.querySelectorAll('.tab-button > button');
            let sections = document.querySelectorAll('section');
            let btns, target, sectionOffset, secArray, btnArray;


            function setTabEvent(){
                tabs.forEach((el,i)=> {
                    btns = el;
                   // console.log(sections[i]);

                    btns.onclick=(e)=>{
                        target = e.target;
                       //console.log(target);
                        sectionOffset = sections[i].offsetTop;
                        for(let key of target.offsetParent.children){secArray = key.classList; secArray.remove('on');}
                        target.classList.add('on');
                        scrollTo({top:sectionOffset,behavior:"smooth"});

                    }
                });
            }
            function setScrollLoad(){
                // window.addEventListener('touchmove', (e) => {
                //     console.log(e.changedTouches[0].clientY);
                // });
                window.addEventListener('touchmove', (e) => {
                    //console.dir(e);
                    if(e.changedTouches.length==1){
                        console.log('터치중이다~~~');
                        // window.addEventListener('scroll', () => {
                        //     yOffset = window.pageYOffset;
                        //     //console.log('winScroll:',yOffset);
                        //     sections.forEach((m,i)=>{
                        //         let elm = m;
                        //         if(e.changedTouches[0].pageY>=m.offsetTop){
                        //             for(let key of tabs){btnArray=key.classList; btnArray.remove('on');}
                        //             tabs[i].classList.add('on');
                        //         }
                        //     });
                        // });
                    }
                });
            }
            function init(){
                setScrollLoad();
                setTabEvent();
            }
            init();

        })();
    </script>

</body>
</html>